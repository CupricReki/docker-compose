# Docker Compose Best Practices Template
# =======================================
#
# Usage:
#   1. Copy this template to your service directory
#   2. Create a .env file with required variables (see .env.example)
#   3. Create docker-compose.override.yml for machine-specific config
#
# NFS Mount Options (set NFS_OPTS in .env):
#   soft          - Return error after timeout instead of hanging forever
#   timeo=50      - 5 second timeout before retry (deciseconds)
#   retrans=3     - Number of retries before giving up
#   rsize=1048576 - 1MB read buffer for better throughput
#   wsize=1048576 - 1MB write buffer for better throughput  
#   noatime       - Don't update access times (reduces NFS traffic)
#   nolock        - Disable NFS locking (good for media files)
#
# Example NFS_OPTS:
#   NFS_OPTS=soft,timeo=50,retrans=3,rsize=1048576,wsize=1048576,noatime,nolock
#
---
services:
  app:
    image: "${IMAGE}"
    container_name: "${CONTAINER_NAME}"
    environment:
      - TZ=${TZ:-America/New_York}
      - PUID=${PUID:-1000}
      - PGID=${PGID:-1000}
    volumes:
      - ./config:/config
    restart: unless-stopped
    labels:
      - diun.enable=true

# Example NFS volume definition:
# volumes:
#   media:
#     driver: local
#     driver_opts:
#       type: "nfs4"
#       o: "addr=${NFS_SERVER},${NFS_OPTS}"
#       device: ":${NFS_PATH}"
