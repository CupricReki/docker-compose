#!/usr/bin/env node


const exit = process.exit;
const shell = require('shelljs')
const version = require('../package.json').version;

let ret;

console.log('>>> git tag & push (version %s):', version);

ret = shell.exec('git tag -a ' + version + ' -m "' + version + '"').code;
if (ret) { exit(1); }

ret = shell.exec('git push origin master && git push origin --tags').code;
if (ret) { exit(1); }

console.log('>>> npm publish:');

ret = shell.exec('npm publish').code;
if (ret) { exit(1); }

console.log('>>> done');
